<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Transfer Connect</title>
    <link href="css/metro.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/metro-responsive.min.css">
    <link rel="stylesheet" type="text/css" href="css/icomoon.css">
    <link rel="stylesheet" type="text/css" href="css/metro-icons.css">
    <link rel="stylesheet" type="text/css" href="css/flexslider.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="cordova.js"></script>
    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/metro.min.js"></script>
    <script type="text/javascript">
    $(function() {
        $('#menuTrigger').on('click', function(event) {
            event.preventDefault();
            var menuid = $(this).attr('href');
            $(document).find(menuid).toggle('fast');
            console.log(menuid);
        })
    })

    document.addEventListener('deviceready', onDeviceReady, false);

    function onDeviceReady(argument) {
        searchContact();
    }

    var citems = [];
    var cjson;

    function onSuccess(contacts) {
        // alert('Found ' + contacts.length + ' contacts.');
        /*$.Notify({
            caption: 'Success !',
            content: 'Found ' + contacts.length + ' contacts.',
            type: 'success'
        });*/
        $("#contactList").html("<h3>"+contacts.length+" contacts found.</h3>");

        for (var i = 0; i < contacts.length; i++) {
            /*var eml=null;
            for (var j = 0; j < contacts[i].emails.length; j++) {
                eml = contacts[i].emails[j].pref;
            };*/
            // var jscont = JSON.stringify(contacts[i]);
            /*var phno = contacts[i].phoneNumbers;
            var emls = contacts[i].emails;*/

            // var phot = JSON.stringify(contacts[i].photos);
            /*var item = '<div class="list"><img src="' + contacts[i].photos[0].value + '" class="list-icon" alt=""><span class="list-title">' + contacts[i].name.formatted + '</span>'+contacts[i].phoneNumbers[0].value+'<br>'+contacts[i].emails[0].value+'</div>';*/
            // citems.push(item);
            // $("#contactList").append('<div class="list">'+contacts[i].name.formatted+'</div>');
            for (var j = 0; j < contacts[i].phoneNumbers.length; j++) {
                if (contacts[i].phoneNumbers[j].type == "mobile") {
                    // citems.push(contacts[i].phoneNumbers[j].value );
                    $("#contactList").append('<div class="list"><img src="' + contacts[i].photos[i].value + '" class="list-icon" alt=""><span class="list-title">' + contacts[i].name.formatted + '</span>'+contacts[i].phoneNumbers[j].value+'</div>');
                };
            };
            
            citems.push(JSON.stringify(contacts[i].phoneNumbers));
        };
        // $("#loader").hide();
        $("#contactList").append(citems.join(' -|- '));
    };

    function onError(contactError) {
        alert('Some error occured!');
    };

    function searchContact() {
        var options = new ContactFindOptions();
        options.filter = "";
        options.multiple = true;
        // options.desiredFields = [navigator.contacts.fieldType.name, navigator.contacts.fieldType.emails, navigator.contacts.fieldType.photos ];
        options.hasPhoneNumber = true;
        // var fields = [navigator.contacts.fieldType.name,];
        var filter = ["name"];
        navigator.contacts.find(filter, onSuccess, onError, options);
    }
    </script>
</head>

<body>
    <header class="head">
        <div class="app-bar orange" data-role="appbar">
            <a class="app-bar-element" href="...">WOW</a>
            <span class="app-bar-divider"></span>
            <ul class="app-bar-menu green place-right">
                <li><a href="index.html">Home</a></li>
                <li><a href="support.html">Support</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </header>
    <section class="padding-vert-30 relative" style="min-height:90vh;">
        <!-- <div id="loader" class="bg-dark">
            <div data-role="preloader" data-type="square"></div>
        </div> -->
        <div class="container">
            <div id="contactList" class="listview" data-role="listview">
                <!-- <div class="list">
                    <img src="" class="list-icon" alt="">
                    <span class="mif-user"></span>
                    <span class="list-title">List title</span>Other items
                </div> -->
            </div>
        </div>
    </section>
    <script type="text/javascript">
    $(function() {

    });
    </script>
</body>

</html>